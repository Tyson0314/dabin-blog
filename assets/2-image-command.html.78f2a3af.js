import{_ as e}from"./plugin-vue_export-helper.21dcd24c.js";import{o as i,c as d,e as a}from"./app.09d9ce72.js";const n={},s=a(`<h1 id="docker\u955C\u50CF\u5E38\u7528\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#docker\u955C\u50CF\u5E38\u7528\u547D\u4EE4" aria-hidden="true">#</a> docker\u955C\u50CF\u5E38\u7528\u547D\u4EE4</h1><h2 id="\u6DFB\u52A0docker\u4ED3\u5E93\u4F4D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u6DFB\u52A0docker\u4ED3\u5E93\u4F4D\u7F6E" aria-hidden="true">#</a> \u6DFB\u52A0docker\u4ED3\u5E93\u4F4D\u7F6E</h2><p>\u5B89\u88C5yum-utils\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>yum install -y yum-utils device-mapper-persistent-data lvm2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6DFB\u52A0\u4ED3\u5E93\u5730\u5740\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u5B89\u88C5docker\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5docker\u670D\u52A1" aria-hidden="true">#</a> \u5B89\u88C5docker\u670D\u52A1</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>yum install docker-ce
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u542F\u52A8-docker-\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#\u542F\u52A8-docker-\u670D\u52A1" aria-hidden="true">#</a> \u542F\u52A8 docker \u670D\u52A1</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>systemctl start docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u91CD\u542Fdocker\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#\u91CD\u542Fdocker\u670D\u52A1" aria-hidden="true">#</a> \u91CD\u542Fdocker\u670D\u52A1</h2><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>systemctl restart docker<span class="token punctuation">.</span>service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u641C\u7D22\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#\u641C\u7D22\u955C\u50CF" aria-hidden="true">#</a> \u641C\u7D22\u955C\u50CF</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker search java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u4E0B\u8F7D\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#\u4E0B\u8F7D\u955C\u50CF" aria-hidden="true">#</a> \u4E0B\u8F7D\u955C\u50CF\uFF1A</h2><p>\u4E0D\u52A0\u7248\u672C\u53F7\uFF0C\u5219\u9ED8\u8BA4\u4E0B\u8F7D\u6700\u65B0\u7248\u672C\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker pull nginx:1.18.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u5217\u51FA\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#\u5217\u51FA\u955C\u50CF" aria-hidden="true">#</a> \u5217\u51FA\u955C\u50CF</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker images

REPOSITORY   TAG       IMAGE ID       CREATED         SIZE
nginx        1.18.0    c2c45d506085   7 days ago      133MB
nginx        1.17.0    719cd2e3ed04   22 months ago   109MB
java         8         d23bdf5b1b1b   4 years ago     643MB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5220\u9664\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#\u5220\u9664\u955C\u50CF" aria-hidden="true">#</a> \u5220\u9664\u955C\u50CF</h2><p>\u5220\u9664\u955C\u50CF\u524D\u5FC5\u987B\u5148\u5220\u9664\u4EE5\u6B64\u955C\u50CF\u4E3A\u57FA\u7840\u7684\u5BB9\u5668\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker rmi -f imageID # -f \u5F3A\u5236\u5220\u9664\u955C\u50CF
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5220\u9664\u6240\u6709\u6CA1\u6709\u5F15\u7528\u7684\u955C\u50CF\uFF08\u627E\u51FAIMAGE ID\u4E3Anone\u7684\u955C\u50CF\uFF09\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker rmi \`docker images | grep none | awk &#39;{print $3}&#39;\`
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5F3A\u5236\u5220\u9664\u6240\u6709\u955C\u50CF\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker rmi -f $(docker images)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u6253\u5305\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#\u6253\u5305\u955C\u50CF" aria-hidden="true">#</a> \u6253\u5305\u955C\u50CF</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># -t \u8868\u793A\u6307\u5B9A\u955C\u50CF\u4ED3\u5E93\u540D\u79F0/\u955C\u50CF\u540D\u79F0:\u955C\u50CF\u6807\u7B7E .\u8868\u793A\u4F7F\u7528\u5F53\u524D\u76EE\u5F55\u4E0B\u7684Dockerfile\u6587\u4EF6
docker build -t mall/mall-admin:1.0-SNAPSHOT .
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u521B\u5EFA\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u955C\u50CF" aria-hidden="true">#</a> \u521B\u5EFA\u955C\u50CF</h2><p>\u955C\u50CF\u7684\u521B\u5EFA\u4E5F\u6709\u4E24\u79CD\uFF1A</p><ul><li>\u5229\u7528\u5DF2\u6709\u7684\u955C\u50CF\u521B\u5EFA\u5BB9\u5668\u4E4B\u540E\u8FDB\u884C\u4FEE\u6539\uFF0C\u4E4B\u540Ecommit\u751F\u6210\u955C\u50CF</li><li>\u5229\u7528Dockerfile\u521B\u5EFA\u955C\u50CF</li></ul><p>\uFF081\uFF09\u5229\u7528\u5DF2\u6709\u7684\u955C\u50CF\u521B\u5EFA\u5BB9\u5668\u4E4B\u540E\u8FDB\u884C\u4FEE\u6539</p><p>\u5229\u7528\u955C\u50CF\u542F\u52A8\u5BB9\u5668\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@xxx ~]# docker run -it java:8 /bin/bash    # \u542F\u52A8\u4E00\u4E2A\u5BB9\u5668
[root@72f1a8a0e394 /]#    # \u8FD9\u91CC\u547D\u4EE4\u884C\u5F62\u5F0F\u53D8\u4E86\uFF0C\u8868\u793A\u5DF2\u7ECF\u8FDB\u5165\u4E86\u4E00\u4E2A\u65B0\u73AF\u5883
[root@72f1a8a0e394 /]# vim    # \u6B64\u65F6\u7684\u5BB9\u5668\u4E2D\u6CA1\u6709vim
bash: vim: command not found
[root@72f1a8a0e394 /]# apt-get update    # \u66F4\u65B0\u8F6F\u4EF6\u5305
[root@72f1a8a0e394 /]# apt-get install vim   # \u5B89\u88C5vim
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>exit\u9000\u51FA\u8BE5\u5BB9\u5668\uFF0C\u7136\u540E\u67E5\u770Bdocker\u4E2D\u8FD0\u884C\u7684\u7A0B\u5E8F\uFF08\u5BB9\u5668\uFF09\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@VM_0_7_centos ~]# docker ps -a
CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS                       PORTS     NAMES
857aa43eeed4   java:8         &quot;/bin/bash&quot;              19 minutes ago   Exited (127) 4 seconds ago             gifted_blackburn
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5C06\u5BB9\u5668\u8F6C\u5316\u4E3A\u4E00\u4E2A\u955C\u50CF\uFF0C\u6B64\u65F6Docker\u5F15\u64CE\u4E2D\u5C31\u6709\u4E86\u6211\u4EEC\u65B0\u5EFA\u7684\u955C\u50CF\uFF0C\u6B64\u955C\u50CF\u548C\u539F\u6709\u7684java\u955C\u50CF\u533A\u522B\u5728\u4E8E\u591A\u4E86\u4E2Avim\u5DE5\u5177\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@VM_0_7_centos ~]# docker commit -m &quot;java with vim&quot; -a &quot;tyson&quot; 857aa43eeed4 tyson/java:vim
sha256:67c4b3658485690c9128e0b6d4c5dfa63ec100c89b417e3148f3c808254d6b9b
[root@VM_0_7_centos ~]# docker images
REPOSITORY   TAG       IMAGE ID       CREATED         SIZE
tyson/java   vim       67c4b3658485   7 seconds ago   684MB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u65B0\u5EFA\u7684\u955C\u50CF\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@VM_0_7_centos ~]# docker run -it tyson/java:vim /bin/bash
root@88fead8e7db5:/# ls
bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@88fead8e7db5:/# touch demo.txt
root@88fead8e7db5:/# vim demo.txt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\uFF082\uFF09\u5229\u7528Dockerfile\u521B\u5EFA\u955C\u50CF</p><p>dockerfile\u7528\u4E8E\u544A\u8BC9docker build\u6267\u884C\u54EA\u4E9B\u64CD\u4F5C\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>#\u8BE5\u955C\u50CF\u4EE5\u54EA\u4E2A\u955C\u50CF\u4E3A\u57FA\u7840
FROM java:8

#\u6784\u5EFA\u8005\u7684\u4FE1\u606F
MAINTAINER tyson

#build\u955C\u50CF\u6267\u884C\u7684\u64CD\u4F5C
RUN apt-get update
RUN apt-get install vim

#\u62F7\u8D1D\u672C\u5730\u6587\u4EF6\u5230\u955C\u50CF\u4E2D
COPY ./* /usr/tyson/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5229\u7528build\u547D\u4EE4\u6784\u5EFA\u955C\u50CF\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker build -t=&quot;tyson/java:vim&quot; .
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5176\u4E2D-t\u7528\u6765\u6307\u5B9A\u65B0\u955C\u50CF\u7684\u7528\u6237\u4FE1\u606F\u3001tag\u7B49\u3002\u6700\u540E\u7684\u70B9\u8868\u793A\u5728\u5F53\u524D\u76EE\u5F55\u5BFB\u627EDockerfile\u3002</p><p>\u6784\u5EFA\u5B8C\u6210\u4E4B\u540E\uFF0C\u901A\u8FC7<code>docker images</code>\u53EF\u4EE5\u67E5\u770B\u751F\u6210\u7684\u955C\u50CF\u3002</p><h2 id="\u63A8\u9001\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#\u63A8\u9001\u955C\u50CF" aria-hidden="true">#</a> \u63A8\u9001\u955C\u50CF</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># \u767B\u5F55Docker Hub
docker login
# \u7ED9\u672C\u5730\u955C\u50CF\u6253\u6807\u7B7E\u4E3A\u8FDC\u7A0B\u4ED3\u5E93\u540D\u79F0
docker tag mall/mall-admin:1.0-SNAPSHOT macrodocker/mall-admin:1.0-SNAPSHOT
# \u63A8\u9001\u5230\u8FDC\u7A0B\u4ED3\u5E93
docker push macrodocker/mall-admin:1.0-SNAPSHOT
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u4EC0\u4E48\u662Fdocker hub</strong>\uFF1F</p><p>Docker\u5B98\u65B9\u7EF4\u62A4\u4E86\u4E00\u4E2ADockerHub\u7684\u516C\u5171\u4ED3\u5E93\uFF0C\u91CC\u8FB9\u5305\u542B\u6709\u5F88\u591A\u5E73\u65F6\u7528\u7684\u8F83\u591A\u7684\u955C\u50CF\u3002\u9664\u4E86\u4ECE\u4E0A\u8FB9\u4E0B\u8F7D\u955C\u50CF\u4E4B\u5916\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u5C06\u81EA\u5DF1\u81EA\u5B9A\u4E49\u7684\u955C\u50CF\u53D1\u5E03\uFF08push\uFF09\u5230DockerHub\u4E0A\u3002</p><ol><li>\u767B\u5F55docker hub\uFF1A<code>docker login</code></li><li>\u5C06\u672C\u5730\u955C\u50CF\u63A8\u9001\u5230docker hub\uFF0C\u955C\u50CF\u7684username\u9700\u8981\u4E0Edocker hub\u7684username\u4E00\u81F4\uFF1A<code>docker push tyson14/java:vim</code></li></ol><h2 id="\u4FEE\u6539\u955C\u50CF\u5B58\u653E\u4F4D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u4FEE\u6539\u955C\u50CF\u5B58\u653E\u4F4D\u7F6E" aria-hidden="true">#</a> \u4FEE\u6539\u955C\u50CF\u5B58\u653E\u4F4D\u7F6E</h2><p>1\u3001\u67E5\u770B\u955C\u50CF\u5B58\u653E\u4F4D\u7F6E\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker info | grep &quot;Docker Root Dir&quot;
 Docker Root Dir: /var/lib/docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>2\u3001\u5173\u95EDdocker\u670D\u52A1\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>systemctl stop docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>3\u3001\u539F\u955C\u50CF\u76EE\u5F55\u79FB\u52A8\u5230\u76EE\u6807\u76EE\u5F55\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>mv /var/lib/docker /home/data/docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>4\u3001\u5EFA\u7ACB\u8F6F\u8FDE\u63A5\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ln -s /home/data/docker /var/lib/docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>5\u3001\u518D\u6B21\u67E5\u770B\u955C\u50CF\u5B58\u653E\u4F4D\u7F6E\uFF0C\u53D1\u73B0\u5DF2\u7ECF\u4FEE\u6539\u3002</p>`,62),r=[s];function l(c,t){return i(),d("div",null,r)}var u=e(n,[["render",l],["__file","2-image-command.html.vue"]]);export{u as default};
