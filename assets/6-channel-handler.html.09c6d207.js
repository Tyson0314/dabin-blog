import{_ as n}from"./plugin-vue_export-helper.21dcd24c.js";import{o as a,c as e,e as t}from"./app.09d9ce72.js";const s={},d=t(`<h1 id="channelhandler" tabindex="-1"><a class="header-anchor" href="#channelhandler" aria-hidden="true">#</a> ChannelHandler</h1><h2 id="channel-\u7684\u751F\u547D\u5468\u671F" tabindex="-1"><a class="header-anchor" href="#channel-\u7684\u751F\u547D\u5468\u671F" aria-hidden="true">#</a> Channel \u7684\u751F\u547D\u5468\u671F</h2><table><thead><tr><th>\u72B6\u6001</th><th>\u63CF\u8FF0</th></tr></thead><tbody><tr><td>ChannelUnregistered</td><td>Channel \u5DF2\u521B\u5EFA\uFF0C\u4F46\u8FD8\u672A\u6CE8\u518C\u5230 EventLoop</td></tr><tr><td>ChannelRegistered</td><td>Channel \u5DF2\u6CE8\u518C\u5230\u4E86 EventLoop</td></tr><tr><td>ChannelActive</td><td>Channel \u5DF2\u7ECF\u8FDE\u63A5\u5230\u5B83\u7684\u8FDC\u7A0B\u8282\u70B9\uFF0C\u53EF\u4EE5\u63A5\u53D7\u548C\u53D1\u9001\u6570\u636E</td></tr><tr><td>ChannelInactive</td><td>Channel \u6CA1\u6709\u8FDE\u63A5\u5230\u8FDC\u7A0B\u8282\u70B9</td></tr></tbody></table><p>\u6B63\u5E38\u7684\u751F\u547D\u5468\u671F\uFF1A</p><p>ChannelRegistered -&gt; ChannelActive -&gt; ChannelInactive -&gt; ChannelUnregistered</p><h2 id="channelhandler-\u7684\u751F\u547D\u5468\u671F" tabindex="-1"><a class="header-anchor" href="#channelhandler-\u7684\u751F\u547D\u5468\u671F" aria-hidden="true">#</a> ChannelHandler \u7684\u751F\u547D\u5468\u671F</h2><table><thead><tr><th>\u65B9\u6CD5</th><th>\u63CF\u8FF0</th></tr></thead><tbody><tr><td>handlerAdded</td><td>\u628AChanneHandler\u6DFB\u52A0\u5230ChannelPipeline\u65F6\u88AB\u8C03\u7528</td></tr><tr><td>handlerRemoved</td><td>\u4ECEChannelPipeline\u4E2D\u79FB\u9664ChannelHandler\u65F6\u88AB\u8C03\u7528</td></tr><tr><td>exceptionCaught</td><td>\u5904\u7406\u8FC7\u7A0B\u4E2D\u5728ChannelPipeline\u4E2D\u6709\u9519\u8BEF\u4EA7\u751F\u65F6\u88AB\u8C03\u7528</td></tr></tbody></table><h2 id="channelinboundhandler-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#channelinboundhandler-\u63A5\u53E3" aria-hidden="true">#</a> ChannelInboundHandler \u63A5\u53E3</h2><p>\u5904\u7406\u5165\u7AD9\u6570\u636E\u4EE5\u53CA\u5404\u79CD\u72B6\u6001\u53D8\u5316\u3002</p><table><thead><tr><th>\u65B9\u6CD5</th><th>\u63CF\u8FF0</th></tr></thead><tbody><tr><td>channelRead</td><td>\u4ECEChannel\u8BFB\u53D6\u6570\u636E\u65F6\u88AB\u8C03\u7528</td></tr><tr><td>channelReadComplete</td><td>\u4ECEChannel\u4E0A\u4E00\u4E2A\u8BFB\u64CD\u4F5C\u5B8C\u6210\u65F6\u88AB\u8C03\u7528</td></tr><tr><td>channelWritablityChanged</td><td>Channel \u7684\u53EF\u5199\u72B6\u6001\u53D1\u751F\u6539\u53D8\u65F6\u88AB\u8C03\u7528</td></tr><tr><td>userEventTriggered</td><td>\u5F53ChannelnboundHandler.fireUserEventTriggered()\u65B9\u6CD5\u88AB\u8C03\u7528\u65F6\u88AB\u8C03\u7528\uFF0C\u56E0\u4E3A\u4E00\u4E2APOJO \u88AB\u4F20\u7ECF\u4E86ChannelPipeline</td></tr></tbody></table><p>ReferenceCountUtil \u91CA\u653E\u6D88\u606F\u8D44\u6E90\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Sharable</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DiscardHandler</span> <span class="token keyword">extends</span> <span class="token class-name">ChannelInboundHandlerAdapter</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">channelRead</span><span class="token punctuation">(</span><span class="token class-name">ChannelHandlerContext</span> ctx<span class="token punctuation">,</span> <span class="token class-name">Object</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ReferenceCountUtil</span><span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>SimpleChannelInboundHandler \u4F1A\u81EA\u52A8\u91CA\u653E\u8D44\u6E90\uFF0C\u6240\u4EE5\u4E0D\u5E94\u8BE5\u5B58\u50A8\u6307\u5411\u4EFB\u4F55\u6D88\u606F\u7684\u5F15\u7528\u4F9B\u5C06\u6765\u4F7F\u7528\uFF0C\u56E0\u4E3A\u8FD9\u4E9B\u5F15\u7528\u90FD\u5C06\u4F1A\u5931\u6548\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleDiscardHandler</span>
        <span class="token keyword">extends</span> <span class="token class-name">SimpleChannelInboundHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">channelRead0</span><span class="token punctuation">(</span><span class="token class-name">ChannelHandlerContext</span> ctx<span class="token punctuation">,</span>
                             <span class="token class-name">Object</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// No need to do anything special</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="channeloutboundhandler-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#channeloutboundhandler-\u63A5\u53E3" aria-hidden="true">#</a> ChannelOutboundHandler \u63A5\u53E3</h2><p>ChannelOutboundHandler \u4E00\u4E2A\u5F3A\u5927\u7684\u529F\u80FD\u662F\u53EF\u4EE5\u6309\u9700\u63A8\u8FDF\u64CD\u4F5C\u6216\u8005\u4E8B\u4EF6\u3002</p><table><thead><tr><th>\u65B9\u6CD5</th><th>\u63CF\u8FF0</th></tr></thead><tbody><tr><td>bind(ChannelHandlerContext, SocketAddress, ChannelPromise)</td><td>\u5F53\u8BF7\u6C42\u5C06Channel\u7ED1\u5B9A\u5230\u672C\u5730\u5730\u5740\u65F6\u88AB\u8C03\u7528</td></tr><tr><td>connect(ChannelHandlerContext, SocketAddress, ChannelPromise)</td><td>\u5F53\u8BF7\u6C42\u8FDE\u63A5\u5230\u8FDC\u7A0B\u8282\u70B9\u65F6\u88AB\u8C03\u7528</td></tr><tr><td>close(ChannelHandlerContext, ChannelPromise)</td><td>\u5F53\u8BF7\u6C42\u5173\u95EDChannel\u65F6\u88AB\u8C03\u7528</td></tr><tr><td>deregister(ChannelHandlerContext, ChannelPromise)</td><td>\u5F53\u8BF7\u6C42\u5C06Channel \u4ECE\u5B83\u7684EventLoop \u6CE8\u9500\u65F6\u88AB\u8C03\u7528</td></tr><tr><td>read(ChannelHandlerContext)</td><td>\u5F53\u8BF7\u6C42\u4ECEChannel \u8BFB\u53D6\u66F4\u591A\u7684\u6570\u636E\u65F6\u88AB\u8C03\u7528</td></tr><tr><td>flush(ChannelHandlerContext)</td><td>\u5F53\u8BF7\u6C42\u901A\u8FC7Channel \u5C06\u5165\u961F\u6570\u636E\u51B2\u5237\u5230\u8FDC\u7A0B\u8282\u70B9\u65F6\u88AB\u8C03\u7528</td></tr><tr><td>write(ChannelHandlerContext, Object, ChannelPromise)</td><td>\u5F53\u8BF7\u6C42\u901A\u8FC7Channel \u5C06\u6570\u636E\u5199\u5230\u8FDC\u7A0B\u8282\u70B9\u65F6\u88AB\u8C03\u7528</td></tr></tbody></table><p>ChannelPromise \u662F ChannelFuture \u7684\u4E00\u4E2A\u5B50\u7C7B\uFF0CChannelOutboundHandler \u4E2D\u7684\u5927\u90E8\u5206\u65B9\u6CD5\u90FD\u9700\u8981\u4E00\u4E2A ChannelPromise\u53C2\u6570\uFF0C\u4EE5\u4FBF\u5728\u64CD\u4F5C\u5B8C\u6210\u65F6\u5F97\u5230\u901A\u77E5\u3002</p><h2 id="channelhandleradapter" tabindex="-1"><a class="header-anchor" href="#channelhandleradapter" aria-hidden="true">#</a> ChannelHandlerAdapter</h2><p>ChannelHandlerAdapter \u63D0\u4F9B\u4E86\u5B9E\u7528\u65B9\u6CD5 isSharable()\uFF0C\u5982\u679C\u5176\u5BF9\u5E94\u7684\u5B9E\u73B0\u88AB\u6807\u6CE8\u6210 @Sharable\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u65B9\u6CD5\u5C06\u8FD4\u56DEtrue\uFF0C\u8868\u793A\u5B83\u53EF\u4EE5\u88AB\u6DFB\u52A0\u5230\u591A\u4E2A ChannelPipeline \u4E2D\u3002</p><p>\u5171\u4EAB ChannelHandler \u4E00\u4E2A\u5E38\u89C1\u7684\u7528\u9014\u662F\u7528\u4E8E\u6536\u96C6\u8DE8\u8D8A\u591A\u4E2A channel \u7684\u7EDF\u8BA1\u4FE1\u606F\u3002</p><h2 id="\u8D44\u6E90\u7BA1\u7406" tabindex="-1"><a class="header-anchor" href="#\u8D44\u6E90\u7BA1\u7406" aria-hidden="true">#</a> \u8D44\u6E90\u7BA1\u7406</h2><p>idea \u914D\u7F6E edit configuration -- vm options -- <code>-Dio.netty.leakDetectionLevel=ADVANCED </code></p>`,23),l=[d];function r(c,i){return a(),e("div",null,l)}var p=n(s,[["render",r],["__file","6-channel-handler.html.vue"]]);export{p as default};
